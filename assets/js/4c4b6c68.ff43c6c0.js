"use strict";(self.webpackChunkixla_docs=self.webpackChunkixla_docs||[]).push([[7993],{6225:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>f,frontMatter:()=>o,metadata:()=>c,toc:()=>h});var a=r(4848),s=r(8453),n=r(1470),l=r(9365);const i=r.p+"assets/images/issuance-d2b93f09e14d487635bc3c88442beec4.png",o={id:"start-issuance",title:"Start Issuance"},u=void 0,c={id:"setup-and-integration/start-issuance",title:"Start Issuance",description:"Issuance can be started from the WebApp or via the Workflow Scheduler API.",source:"@site/docs/setup-and-integration/03-issuing-cards.mdx",sourceDirName:"setup-and-integration",slug:"/setup-and-integration/start-issuance",permalink:"/ixla-docs/docs/setup-and-integration/start-issuance",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"start-issuance",title:"Start Issuance"},sidebar:"defaultSidebar",previous:{title:"Database Integration",permalink:"/ixla-docs/docs/setup-and-integration/database-integration"},next:{title:"Webhooks Integration",permalink:"/ixla-docs/docs/setup-and-integration/webhooks-integration"}},d={},h=[{value:"Issuance Page",id:"issuance-page",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Workflow",id:"workflow",level:4},{value:"Startup Options",id:"startup-options",level:3},{value:"Disable Laser Source",id:"disable-laser-source",level:4},{value:"Stop after N cards",id:"stop-after-n-cards",level:4},{value:"Skip Entity Updates",id:"skip-entity-updates",level:4},{value:"Scheduler API",id:"scheduler-api",level:3},{value:"Task Allocation Strategy",id:"task-allocation-strategy",level:4},{value:"Disable Red Pointer",id:"disable-red-pointer",level:4}];function p(e){const t={a:"a",code:"code",em:"em",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["Issuance can be started from the ",(0,a.jsx)(t.a,{href:"#issuance-page",children:"WebApp"})," or via the ",(0,a.jsx)(t.a,{href:"#scheduler-api",children:"Workflow Scheduler API"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"issuance-page",children:"Issuance Page"}),"\n",(0,a.jsx)("div",{children:(0,a.jsx)("img",{src:i,className:"flex-item"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.p,{children:"The system will require us to specify:"}),"\n",(0,a.jsx)(t.h3,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsxs)(t.p,{children:["This are required parameters. Define what the machine will print (the ",(0,a.jsx)(t.strong,{children:"Job Template"}),") and how it will do it (the ",(0,a.jsx)(t.strong,{children:"Workflow"}),")"]}),"\n",(0,a.jsx)(t.h4,{id:"workflow",children:"Workflow"}),"\n",(0,a.jsx)(t.p,{children:"The workflow defines the sequence of actions that will be performed by the machine for each card that it will process.\r\nOn almost every system this option will not be selectable, and can be left with default value (which varies from system to system)."}),"\n",(0,a.jsx)(t.h3,{id:"startup-options",children:"Startup Options"}),"\n",(0,a.jsx)(t.p,{children:"Startup options let us set some parameters that will change the behavior of the system at runtime. This is useful for testing before going on production. Available options are:"}),"\n",(0,a.jsx)(t.h4,{id:"disable-laser-source",children:"Disable Laser Source"}),"\n",(0,a.jsx)(t.p,{children:"Turns off the laser source. The red spot will be visible and the scan head will move as if it was marking. We can use this option to test/validate our setup."}),"\n",(0,a.jsx)(t.h4,{id:"stop-after-n-cards",children:"Stop after N cards"}),"\n",(0,a.jsx)(t.p,{children:"Tells the system to automatically stop after the specified number of cards were processed."}),"\n",(0,a.jsx)(t.h4,{id:"skip-entity-updates",children:"Skip Entity Updates"}),"\n",(0,a.jsx)(t.p,{children:"Bypasses the database. Templates are printed without replacing entities values"}),"\n",(0,a.jsx)(t.h3,{id:"scheduler-api",children:"Scheduler API"}),"\n",(0,a.jsxs)(t.p,{children:["The webapp uses the scheduler API to start/stop issuance.\r\nThe ",(0,a.jsx)(t.em,{children:"StartWorkflowScheduler"})," endpoint accepts a ",(0,a.jsx)(t.em,{children:"WorkflowSchedulerStartupParamsDto"})," object as a parameter.\r\nThe first 6 fields of ",(0,a.jsx)(t.em,{children:"WorkflowSchedulerStartupParamsDto"})," map 1-to-1 with what we've seen in the form above."]}),"\n",(0,a.jsx)(t.h4,{id:"task-allocation-strategy",children:"Task Allocation Strategy"}),"\n",(0,a.jsx)(t.p,{children:"Tells the system which strategy it should use to balance mark jobs across available laser modules."}),"\n",(0,a.jsx)(t.h4,{id:"disable-red-pointer",children:"Disable Red Pointer"}),"\n",(0,a.jsx)(t.p,{children:"Turns off the red-pointer. This is useful for testing workflows that require XY Auto-Positioning with the\r\nlaser source disabled."}),"\n",(0,a.jsxs)(n.A,{groupId:"code",children:[(0,a.jsx)(l.A,{value:"ts",label:"Angular",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"  import { WorkflowSchedulerService } from '@ixla/aida-sdk-angular';\r\n  ...\r\n  constructor(private readonly scheduler: WorkflowSchedulerService) {}\r\n  ... \r\n  const schedulerState = await this.scheduler.StartWorkflowScheduler({\r\n    workflowSchedulerStartupParamsDto: {\r\n      StopAfter : -1, // the system keeps polling the __DET__ table for records in 'Waiting' state\r\n      JobTemplateName : 'my job template name',  // the job template that defines the desired personalization process \r\n      DryRun : false,  // Useful for testing, does not personalize cards\r\n      NoReset : false, // If true skips the transport reset when the scheduler starts\r\n      SkipEntityUpdates : false // Useful for testing/demos, the system creates mock recurds (personalization fields are set to null)\r\n    }\r\n  }).toPromise();\r\n  ...\n"})})}),(0,a.jsx)(l.A,{value:"csharp",label:"C#",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:"  using IXLA.AIDA.Sdk;\r\n  ...\r\n  private readonly WorkflowSchedulerService _scheduler; \r\n  ... \r\n  WorkflowSchedulerStateDto schedulerSate = await _scheduler.StartWorkflowScheduler(new WorkflowSchedulerStartupParamsDto {\r\n    StopAfter = -1, \r\n    JobTemplateName = 'my-job-template',\r\n    DryRun = false, \r\n    NoReset = false,\r\n    SkipEntityUpdates = false\r\n  });\r\n  ...\n"})})}),(0,a.jsxs)(l.A,{value:"http",label:"HTTP",children:[(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-http",children:'POST /AIDA/v1/workflow-scheduler/start\r\nHost: $BOX_IP_ADDRESS:5000\r\nAccept: application/json\r\n\r\n{\r\n    "jobTemplateName": "my-job-template",\r\n    "dryRun": true,\r\n    "stopAfter" : -1,\r\n    "skipEntityUpdates": true,\r\n    "noReset": false\r\n}\n'})}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",metastring:'title="Response Body"',children:'{\r\n  "status": "Starting",\r\n  "queueSize": 0,\r\n  "errorDetails": "string",\r\n  "lastLoadedItemId": 0,\r\n  "upTimeSeconds": 0,\r\n  "currentJobTemplate": {\r\n      ...\r\n  }\r\n}\n'})})]})]})]})}function f(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},9365:(e,t,r)=>{r.d(t,{A:()=>l});r(6540);var a=r(8215);const s={tabItem:"tabItem_Ymn6"};var n=r(4848);function l(e){let{children:t,hidden:r,className:l}=e;return(0,n.jsx)("div",{role:"tabpanel",className:(0,a.A)(s.tabItem,l),hidden:r,children:t})}},1470:(e,t,r)=>{r.d(t,{A:()=>S});var a=r(6540),s=r(8215),n=r(3104),l=r(6347),i=r(205),o=r(7485),u=r(1682),c=r(9466);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:r}=e;return(0,a.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:r,attributes:a,default:s}}=e;return{value:t,label:r,attributes:a,default:s}}))}(r);return function(e){const t=(0,u.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function p(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:r}=e;const s=(0,l.W6)(),n=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:t,groupId:r});return[(0,o.aZ)(n),(0,a.useCallback)((e=>{if(!n)return;const t=new URLSearchParams(s.location.search);t.set(n,e),s.replace({...s.location,search:t.toString()})}),[n,s])]}function m(e){const{defaultValue:t,queryString:r=!1,groupId:s}=e,n=h(e),[l,o]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=r.find((e=>e.default))??r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:n}))),[u,d]=f({queryString:r,groupId:s}),[m,b]=function(e){let{groupId:t}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(t),[s,n]=(0,c.Dv)(r);return[s,(0,a.useCallback)((e=>{r&&n.set(e)}),[r,n])]}({groupId:s}),g=(()=>{const e=u??m;return p({value:e,tabValues:n})?e:null})();(0,i.A)((()=>{g&&o(g)}),[g]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!p({value:e,tabValues:n}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),b(e)}),[d,b,n]),tabValues:n}}var b=r(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=r(4848);function w(e){let{className:t,block:r,selectedValue:a,selectValue:l,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:u}=(0,n.a_)(),c=e=>{const t=e.currentTarget,r=o.indexOf(t),s=i[r].value;s!==a&&(u(t),l(s))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;t=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;t=o[r]??o[o.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":r},t),children:i.map((e=>{let{value:t,label:r,attributes:n}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>o.push(e),onKeyDown:d,onClick:c,...n,className:(0,s.A)("tabs__item",g.tabItem,n?.className,{"tabs__item--active":a===t}),children:r??t},t)}))})}function x(e){let{lazy:t,children:r,selectedValue:s}=e;const n=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){const e=n.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:n.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function j(e){const t=m(e);return(0,v.jsxs)("div",{className:(0,s.A)("tabs-container",g.tabList),children:[(0,v.jsx)(w,{...e,...t}),(0,v.jsx)(x,{...e,...t})]})}function S(e){const t=(0,b.A)();return(0,v.jsx)(j,{...e,children:d(e.children)},String(t))}}}]);
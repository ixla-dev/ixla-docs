"use strict";(self.webpackChunkixla_docs=self.webpackChunkixla_docs||[]).push([[1935],{9179:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>O,contentTitle:()=>_,default:()=>W,frontMatter:()=>C,metadata:()=>z,toc:()=>J});var a=n(4848),i=n(8453);const r=n.p+"assets/images/home-2f6c1ea1a7cceefaa7ef150e918c9727.png",s=n.p+"assets/images/template_creation_01-45c8060862004747a885f177f30a2465.png",l=n.p+"assets/images/template_creation_02-ae25d31cb2aaa96ce38c364344ef1e8d.png",o=n.p+"assets/images/template_creation_03-55892d711d24e83a6a4f156f542c2351.png",c=n.p+"assets/images/import_rear_entities-cf20c229523cba5d943e8418959bc888.png",d=n.p+"assets/images/template_creation_04-6b5ed80fd30a8ac6f898694e25299db1.png",p=n.p+"assets/images/template_creation_05-00a9d6861d7e474f13c1708476467fc6.png",h=n.p+"assets/images/template_creation_06-23e807ac620de75a6afa1f2599767a57.png";var u,m,f,g,x,b,j,y,w,v,S,A,E,T,I,D,k=n(6540);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},L.apply(this,arguments)}const N=e=>{let{title:t,titleId:n,...a}=e;return k.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",width:372,height:262,viewBox:"-0.5 -0.5 372 262","aria-labelledby":n},a),t?k.createElement("title",{id:n},t):null,u||(u=k.createElement("rect",{width:370,height:260,rx:2.6,ry:2.6,fill:"#e6ffcc",stroke:"#000",pointerEvents:"none"})),k.createElement("switch",{transform:"translate(-.5 -.5)"},k.createElement("foreignObject",{pointerEvents:"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",style:{overflow:"visible",textAlign:"left"}},k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{display:"flex",alignItems:"unsafe flex-start",justifyContent:"unsafe flex-start",width:356,height:1,paddingTop:5,marginLeft:8}},k.createElement("div",{"data-drawio-colors":"color: #000000;",style:{boxSizing:"border-box",fontSize:0,textAlign:"left"}},k.createElement("div",{style:{display:"inline-block",fontSize:14,fontFamily:"system-ui",color:"#000",lineHeight:1.2,pointerEvents:"none",fontWeight:700,whiteSpace:"normal",overflowWrap:"normal"}},k.createElement("font",{style:{fontSize:14}},"Job template"))))),m||(m=k.createElement("text",{x:8,y:19,fontFamily:"system-ui",fontSize:14,fontWeight:"bold"},"\n                    Job template\n                "))),f||(f=k.createElement("rect",{x:8,y:30,width:354,height:99,rx:2.97,ry:2.97,fill:"#b3ff66",stroke:"#000",pointerEvents:"none"})),k.createElement("switch",{transform:"translate(-.5 -.5)"},k.createElement("foreignObject",{pointerEvents:"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",style:{overflow:"visible",textAlign:"left"}},k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{display:"flex",alignItems:"unsafe flex-start",justifyContent:"unsafe flex-end",width:340,height:1,paddingTop:35,marginLeft:14}},k.createElement("div",{"data-drawio-colors":"color: #000000;",style:{boxSizing:"border-box",fontSize:0,textAlign:"right"}},k.createElement("div",{style:{display:"inline-block",fontSize:14,fontFamily:"system-ui",color:"#000",lineHeight:1.2,pointerEvents:"none",fontWeight:700,whiteSpace:"normal",overflowWrap:"normal"}},"Layouts")))),g||(g=k.createElement("text",{x:354,y:49,fontFamily:"system-ui",fontSize:14,textAnchor:"end",fontWeight:"bold"},"\n                    Layouts\n                "))),x||(x=k.createElement("path",{d:"M84.29 48.29V122H15V36h59.39Z",fill:"#ffc",stroke:"#000",strokeMiterlimit:10,pointerEvents:"none"})),b||(b=k.createElement("path",{d:"M74.39 36c.81 2.87-.52 5.84-3.53 7.9l14.14 5Z",fill:"#ffc",stroke:"#000",strokeMiterlimit:10,pointerEvents:"none"})),k.createElement("switch",{transform:"translate(-.5 -.5)"},k.createElement("foreignObject",{pointerEvents:"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",style:{overflow:"visible",textAlign:"left"}},k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{display:"flex",alignItems:"unsafe center",justifyContent:"unsafe center",width:56,height:1,paddingTop:79,marginLeft:22}},k.createElement("div",{"data-drawio-colors":"color: #000000;",style:{boxSizing:"border-box",fontSize:0,textAlign:"center"}},k.createElement("div",{style:{display:"inline-block",fontSize:14,fontFamily:"system-ui",color:"#000",lineHeight:1.2,pointerEvents:"none",fontWeight:700,whiteSpace:"normal",overflowWrap:"normal"}},"Front.sjf")))),j||(j=k.createElement("text",{x:50,y:83,fontFamily:"system-ui",fontSize:14,textAnchor:"middle",fontWeight:"bold"},"\n                    Front.sjf\n                "))),y||(y=k.createElement("path",{d:"M159.29 48.29V122H90V36h59.39Z",fill:"#ffc",stroke:"#000",strokeMiterlimit:10,pointerEvents:"none"})),w||(w=k.createElement("path",{d:"M149.39 36c.81 2.87-.52 5.84-3.53 7.9l14.14 5Z",fill:"#ffc",stroke:"#000",strokeMiterlimit:10,pointerEvents:"none"})),k.createElement("switch",{transform:"translate(-.5 -.5)"},k.createElement("foreignObject",{pointerEvents:"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",style:{overflow:"visible",textAlign:"left"}},k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{display:"flex",alignItems:"unsafe center",justifyContent:"unsafe center",width:56,height:1,paddingTop:79,marginLeft:97}},k.createElement("div",{"data-drawio-colors":"color: #000000;",style:{boxSizing:"border-box",fontSize:0,textAlign:"center"}},k.createElement("div",{style:{display:"inline-block",fontSize:14,fontFamily:"system-ui",color:"#000",lineHeight:1.2,pointerEvents:"none",fontWeight:700,whiteSpace:"normal",overflowWrap:"normal"}},"Rear.sjf")))),v||(v=k.createElement("text",{x:125,y:83,fontFamily:"system-ui",fontSize:14,textAnchor:"middle",fontWeight:"bold"},"\n                    Rear.sjf\n                "))),S||(S=k.createElement("path",{d:"M186.2 177.98c-3.03 0-4.16-2.43-4.16-3.96 0-2.73 2.18-4.08 4.15-4.08 1.62 0 3.86 1.4 3.86 4.08 0 1.75-1.47 3.96-3.85 3.96Zm0 6.78c5.71 0 10.51-4.83 10.51-10.74 0-6.84-5.64-10.85-10.51-10.85-6.1 0-10.93 4.76-10.93 10.85 0 6.03 4.75 10.74 10.93 10.74Zm-22.1-.38-2.1-7.82 6.37-2.56c-.02-1.24.18-2.88.53-4.28l-5.56-4 3.91-6.92 6.15 2.64c1.06-1.06 2.21-2.01 3.52-2.79l-.97-6.62 7.8-2.03 2.4 6.24c1.48 0 2.94.12 4.35.53l3.9-5.36 6.9 3.93-2.63 6.01c1.06 1.15 2.01 2.35 2.78 3.62l6.45-.97 2.1 7.74-6.08 2.41c-.01 1.52-.19 3-.6 4.45l5.18 3.83-3.9 6.92-6-2.63c-1.04 1.15-2.21 1.92-3.38 2.63l1.05 6.54-7.8 2.11-2.47-6.16c-1.5.02-3.05-.16-4.43-.53l-3.9 5.42-6.9-3.92 2.63-6.18c-.97-1-1.86-2.09-2.62-3.37Z",fill:"#e6e6e6",stroke:"#000",strokeMiterlimit:10,pointerEvents:"none"})),k.createElement("switch",{transform:"translate(-.5 -.5)"},k.createElement("foreignObject",{pointerEvents:"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",style:{overflow:"visible",textAlign:"left"}},k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{display:"flex",alignItems:"unsafe flex-start",justifyContent:"unsafe center",width:34,height:1,paddingTop:211,marginLeft:169}},k.createElement("div",{"data-drawio-colors":"color: #000000;",style:{boxSizing:"border-box",fontSize:0,textAlign:"center"}},k.createElement("div",{style:{display:"inline-block",fontSize:14,fontFamily:"system-ui",color:"#000",lineHeight:1.2,pointerEvents:"none",fontWeight:700,whiteSpace:"normal",overflowWrap:"normal"}},"OCR Settings")))),A||(A=k.createElement("text",{x:186,y:225,fontFamily:"system-ui",fontSize:14,textAnchor:"middle",fontWeight:"bold"},"\n                    OCR S...\n                "))),E||(E=k.createElement("path",{d:"M105.2 177.98c-3.03 0-4.16-2.43-4.16-3.96 0-2.73 2.18-4.08 4.15-4.08 1.62 0 3.86 1.4 3.86 4.08 0 1.75-1.47 3.96-3.85 3.96Zm0 6.78c5.71 0 10.51-4.83 10.51-10.74 0-6.84-5.64-10.85-10.51-10.85-6.1 0-10.93 4.76-10.93 10.85 0 6.03 4.75 10.74 10.93 10.74Zm-22.1-.38-2.1-7.82 6.37-2.56c-.02-1.24.18-2.88.53-4.28l-5.56-4 3.91-6.92 6.15 2.64c1.06-1.06 2.21-2.01 3.52-2.79l-.97-6.62 7.8-2.03 2.4 6.24c1.48 0 2.94.12 4.35.53l3.9-5.36 6.9 3.93-2.63 6.01c1.06 1.15 2.01 2.35 2.78 3.62l6.45-.97 2.1 7.74-6.08 2.41c-.01 1.52-.19 3-.6 4.45l5.18 3.83-3.9 6.92-6-2.63c-1.04 1.15-2.21 1.92-3.38 2.63l1.05 6.54-7.8 2.11-2.47-6.16c-1.5.02-3.05-.16-4.43-.53l-3.9 5.42-6.9-3.92 2.63-6.18c-.97-1-1.86-2.09-2.62-3.37Z",fill:"#e6e6e6",stroke:"#000",strokeMiterlimit:10,pointerEvents:"none"})),k.createElement("switch",{transform:"translate(-.5 -.5)"},k.createElement("foreignObject",{pointerEvents:"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",style:{overflow:"visible",textAlign:"left"}},k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{display:"flex",alignItems:"unsafe flex-start",justifyContent:"unsafe center",width:34,height:1,paddingTop:211,marginLeft:88}},k.createElement("div",{"data-drawio-colors":"color: #000000;",style:{boxSizing:"border-box",fontSize:0,textAlign:"center"}},k.createElement("div",{style:{display:"inline-block",fontSize:14,fontFamily:"system-ui",color:"#000",lineHeight:1.2,pointerEvents:"none",fontWeight:700,whiteSpace:"normal",overflowWrap:"normal"}},"AutoPos Settings")))),T||(T=k.createElement("text",{x:105,y:225,fontFamily:"system-ui",fontSize:14,textAnchor:"middle",fontWeight:"bold"},"\n                    AutoP...\n                "))),I||(I=k.createElement("path",{d:"M265.2 177.98c-3.03 0-4.16-2.43-4.16-3.96 0-2.73 2.18-4.08 4.15-4.08 1.62 0 3.86 1.4 3.86 4.08 0 1.75-1.47 3.96-3.85 3.96Zm0 6.78c5.71 0 10.51-4.83 10.51-10.74 0-6.84-5.64-10.85-10.51-10.85-6.1 0-10.93 4.76-10.93 10.85 0 6.03 4.75 10.74 10.93 10.74Zm-22.1-.38-2.1-7.82 6.37-2.56c-.02-1.24.18-2.88.53-4.28l-5.56-4 3.91-6.92 6.15 2.64c1.06-1.06 2.21-2.01 3.52-2.79l-.97-6.62 7.8-2.03 2.4 6.24c1.48 0 2.94.12 4.35.53l3.9-5.36 6.9 3.93-2.63 6.01c1.06 1.15 2.01 2.35 2.78 3.62l6.45-.97 2.1 7.74-6.08 2.41c-.01 1.52-.19 3-.6 4.45l5.18 3.83-3.9 6.92-6-2.63c-1.04 1.15-2.21 1.92-3.38 2.63l1.05 6.54-7.8 2.11-2.47-6.16c-1.5.02-3.05-.16-4.43-.53l-3.9 5.42-6.9-3.92 2.63-6.18c-.97-1-1.86-2.09-2.62-3.37Z",fill:"#e6e6e6",stroke:"#000",strokeMiterlimit:10,pointerEvents:"none"})),k.createElement("switch",{transform:"translate(-.5 -.5)"},k.createElement("foreignObject",{pointerEvents:"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",style:{overflow:"visible",textAlign:"left"}},k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{display:"flex",alignItems:"unsafe flex-start",justifyContent:"unsafe center",width:34,height:1,paddingTop:211,marginLeft:248}},k.createElement("div",{"data-drawio-colors":"color: #000000;",style:{boxSizing:"border-box",fontSize:0,textAlign:"center"}},k.createElement("div",{style:{display:"inline-block",fontSize:14,fontFamily:"system-ui",color:"#000",lineHeight:1.2,pointerEvents:"none",fontWeight:700,whiteSpace:"normal",overflowWrap:"normal"}},"DataSource Settings")))),D||(D=k.createElement("text",{x:265,y:225,fontFamily:"system-ui",fontSize:14,textAnchor:"middle",fontWeight:"bold"},"\n                    DataS...\n                "))))};var F=n(1470),P=n(9365);const C={title:"Configure Job Templates"},_=void 0,z={id:"setup-and-integration/configure-job-templates",title:"Configure Job Templates",description:"Job Templates",source:"@site/docs/setup-and-integration/01-configure-job-templates.mdx",sourceDirName:"setup-and-integration",slug:"/setup-and-integration/configure-job-templates",permalink:"/ixla-docs/docs/setup-and-integration/configure-job-templates",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Configure Job Templates"},sidebar:"defaultSidebar",previous:{title:"Design and create documents",permalink:"/ixla-docs/docs/setup-and-integration/prerequisites"},next:{title:"Database Integration",permalink:"/ixla-docs/docs/setup-and-integration/database-integration"}},O={},J=[{value:"Job Templates",id:"job-templates",level:2},{value:"Job Template Setup Wizard",id:"job-template-setup-wizard",level:2},{value:"Opening the Template Wizard",id:"opening-the-template-wizard",level:3},{value:"1. Create a new Job Template",id:"1-create-a-new-job-template",level:3},{value:"2. Upload SJF Files",id:"2-upload-sjf-files",level:3},{value:"3. Create Layouts",id:"3-create-layouts",level:3},{value:"4. Attach a Data Source",id:"4-attach-a-data-source",level:3},{value:"We&#39;re done!",id:"were-done",level:3}];function R(e){const t={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"job-templates",children:"Job Templates"}),"\n",(0,a.jsx)(t.p,{children:"Job templates are configuration containers that provide the system with the information required to start issuing cards, such as:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Layouts"})," - Association between ",(0,a.jsx)(t.em,{children:"SJF Files"})," and the ",(0,a.jsx)(t.em,{children:"Card Side"})," on which they should be printed"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"XY Auto-Positioning Settings"})," - gives AIDA references to correctly position ",(0,a.jsx)(t.em,{children:"Entities"})," before engraving"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"OCR Settings"})," - Used for data integrity checks"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Data Source Settings"})," - Data Source Settings define where and how the system will retrive personalization data for engraving. Although the system is designed to support different kinds of data sources, the current version supports only relational databases."]}),"\n"]}),"\n","\n",(0,a.jsx)("div",{className:"svg-content-container",children:(0,a.jsx)(N,{})}),"\n",(0,a.jsx)(t.p,{children:"Job Templates can be easily created and configued from the WebApp using its setup wizard."}),"\n",(0,a.jsx)(t.h2,{id:"job-template-setup-wizard",children:"Job Template Setup Wizard"}),"\n",(0,a.jsxs)(t.admonition,{type:"tip",children:[(0,a.jsxs)(t.p,{children:["Click the ",(0,a.jsx)(t.strong,{children:"API"})," tab to see how equivalent actions can be performed using REST API calls."]}),(0,a.jsx)(t.p,{children:"Use the table of contents on the right to navigate between steps"})]}),"\n",(0,a.jsx)(t.h3,{id:"opening-the-template-wizard",children:"Opening the Template Wizard"}),"\n","\n","\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)("span",{className:"icon-btn",children:"+"})," button to open the job tempalte setup wizard"]}),"\n",(0,a.jsx)(F.A,{groupId:"switch",children:(0,a.jsx)(P.A,{value:"webapp",label:"Web App",children:(0,a.jsx)("img",{className:"wizard-step",src:r})})}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h3,{id:"1-create-a-new-job-template",children:"1. Create a new Job Template"}),"\n",(0,a.jsxs)(F.A,{groupId:"switch",children:[(0,a.jsxs)(P.A,{value:"webapp",label:"Web App",children:[(0,a.jsx)("p",{children:(0,a.jsxs)(t.p,{children:["Provide a name and a description for your template and click the ",(0,a.jsx)("span",{className:"btn",children:"CREATE TEMPLATE"})," button"]})}),(0,a.jsx)("img",{className:"wizard-step",src:s})]}),(0,a.jsxs)(P.A,{value:"api",label:"API",children:[(0,a.jsxs)(t.p,{children:["All the operations related to SJF files and, more generally, to SCAPS SAMLight can be\nperformed through the ",(0,a.jsx)(t.em,{children:"Scanner API"}),"."]}),(0,a.jsx)(t.p,{children:"When we create a new tempate, the system perform the following operations:"}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Create a new job template in samlight"}),"\n",(0,a.jsx)(t.li,{children:"Generate a unique identifier"}),"\n",(0,a.jsx)(t.li,{children:"Use the unique identifier as a filename for the new file"}),"\n",(0,a.jsx)(t.li,{children:"Save the new job in its file store"}),"\n"]}),(0,a.jsxs)(F.A,{groupId:"code",children:[(0,a.jsx)(P.A,{value:"ts",label:"Angular",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"import { ScannerService } from '@ixla/aida-sdk-angular'\n\n// ScannerService injected from DI\nexport class MyAppService {\n  constructor(private readonly scanner: ScannerService) {\n  }\n\n  async createJobTemplate(name: string, description: string) {\n      return await this.scanner.createJobTemplate({\n          createJobTemplateDto: { name, description }\n      });\n  }\n}\n\n"})})}),(0,a.jsx)(P.A,{value:"csharp",label:"C#",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:"using IXLA.AIDA.Sdk;\n\npublic class MyAppService {\n\n  private readonly ScannerApi _scanner;\n  \n  // ScannerService injected from DI\n  public MyAppService(ScannerService scanner) {\n    _scanner = scanner;\n  }\n\n  public async Task<JobTemplateDto> CreateJobTemplate(string name, string description) {\n      var parameters = new CreateJobTempltateDto {\n        Name = name,\n        Description = description\n      }\n      return await _scanner.CreateJobTemplate(parameters);\n  }\n}\n\n"})})}),(0,a.jsx)(P.A,{value:"http",label:"HTTP",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-http",children:'POST /AIDA/v1/scanner/job-templates\nHost: $BOX_IP_ADDRESS:5000\nAccept: application/json \n\n{\n  "name" : "My Template Name",\n  "description" : "My Template Description" \n}\n\n'})})})]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",metastring:'title="Response payload"',children:'{\n// highlight-start\n  "id": 1,\n  "name": "string",\n  "description": "string",\n// highlight-end\n  "created": "2019-12-10T10:06:50.466318Z",\n  "updated": "2019-12-10T10:06:50.466318Z",\n  "expectedMarkDuration": "25:01:01.001",\n  ...\n}\n'})}),(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsx)(t.p,{children:"Store the job template id somewhere, we will need it later as a parameter for other API calls"})})]})]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h3,{id:"2-upload-sjf-files",children:"2. Upload SJF Files"}),"\n",(0,a.jsxs)(F.A,{groupId:"switch",children:[(0,a.jsxs)(P.A,{value:"webapp",label:"Web App",children:[(0,a.jsx)("p",{className:"margin-top-2",children:(0,a.jsxs)(t.p,{children:["Now we will need to import ",(0,a.jsx)(t.em,{children:"SJF Files"})," into the system. Click ",(0,a.jsx)("span",{className:"btn btn-white",children:"ADD NEW"})," to open the file dialog"]})}),(0,a.jsx)("img",{className:"wizard-step",src:l}),(0,a.jsx)("p",{className:"margin-top-2",children:(0,a.jsxs)(t.p,{children:["Select the files you want to import and click ",(0,a.jsxs)("span",{className:"btn-system",children:[(0,a.jsx)("u",{children:"O"}),"pen"]})]})}),(0,a.jsx)("img",{className:"wizard-step",src:o}),(0,a.jsx)("p",{className:"margin-top-2",children:(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)("span",{className:"btn",children:"UPLOAD"})," to start transferring the files you selected.\nAIDA stores the uploaded files and indexes entity metadata in its database."]})}),(0,a.jsx)("img",{className:"wizard-step",src:d})]}),(0,a.jsxs)(P.A,{value:"api",label:"API",children:[(0,a.jsxs)(t.p,{children:["SJF Files can be imported using the ",(0,a.jsx)(t.em,{children:"Scanner API"})]}),(0,a.jsxs)(F.A,{groupId:"code",children:[(0,a.jsxs)(P.A,{value:"ts",label:"Angular",children:[(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.em,{children:"UploadLayoutFile"})," endpoint accepts an ",(0,a.jsx)(t.em,{children:"UploadLayoutRequestFileParams"})," object.\nTo upload the files using the ",(0,a.jsx)(t.em,{children:"typescript-angular"})," SDK you will need a browser that supports the ",(0,a.jsx)(t.em,{children:"File API"})]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",metastring:'title="UploadLayoutFileRequestParams.ts"',children:"export interface UploadLayoutFileRequestParams {\n    // The scannerId parameter is present in all ScannerService's endpoints, it \n    // is used to route requests towards the right module in machines that \n    // have more than 1 laser (eg. IXLA BOX). If it is not provided the system \n    // will use the first available module\n    scannerId?: string;   \n    layoutName?: string;  // Layouts are identified by name\n    supportSide?: string; // support side can be ignored during import\n    files?: Array<Blob>;  // files to be uploaded\n}\n"})}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"import { ScannerService } from '@ixla/aida-sdk-angular';\n...\nconstructor(private readonly scanner: ScannerService) {}\n...\n\n// retrieve the list of files to import from UI/External system APIs \nconst filesToImport: Array<UploadLayoutFileRequestParams> = [ ... ]; \n\n// remember, to extract entities metadata the system uses SCAPS SAMLight \n// we cannot parallellize this operations on the same node. \n// We could do it, using different scanners for each layout, but would complicate \n// the code a lot for a very little gain in performance, since this is an operation \n// that is done once, during system configuration\nforeach(var requestParams in filesToImport) {\n  await this.scanner.uploadLayoutFile(requestParams).toPromise();\n}\n\n"})})]}),(0,a.jsx)(P.A,{value:"csharp",label:"C#",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:'using IXLA.AIDA.Sdk;\n... \nprivate readonly _scanner: ScannerService; \n...\n\n// file stream for an sfj file named front.sjf\nusing var frontStream = System.IO.File.OpenRead(@"front.sjf")\n// file stream for an sfj file named rear.sjf\nusing var rearStream = System.IO.File.OpenRead(@"rear.sjf")\n\n\n// import front.sjf \nawait _scanner.uploadLayoutFile(\n  layoutName: "Front",\n  supportSide: "front" // optional, can be ignored during upload\n  files: new List<System.IO.File> { frontStream }\n);\n\n// import rear.sjf \nawait _scanner.uploadLayoutFile(\n  layoutName: "Rear",\n  supportSide: "rear" // optional, can be ignored during upload\n  files: new List<System.IO.File> { rearStream }\n);\n...\n'})})}),(0,a.jsx)(P.A,{value:"http",label:"HTTP",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-http",children:'POST /AIDA/v1/scanner/layouts\nHost: $BOX_IP_ADDRESS:5000\nContent-Type: multipart/form-data;boundary="boundary"\n\n--boundary\nContent-Disposition: form-data; name="files"; filename="Front_DemoBox.sjf"\nContent-Type: binary/octet-stream\n... sjf contents ...\n\n'})})})]}),(0,a.jsx)(t.p,{children:"for every uploaded file the system will perform the following actions automatically:"}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Open SCAPS SAMLight"}),"\n",(0,a.jsx)(t.li,{children:"Create a new empty Job"}),"\n",(0,a.jsxs)(t.li,{children:["Load the uploaded file with the ",(0,a.jsx)(t.code,{children:"Overwrite Entities"})," flag enabled"]}),"\n",(0,a.jsx)(t.li,{children:"Rename entities adding a prefix to avoid duplicates"}),"\n",(0,a.jsx)(t.li,{children:"Index entities and extract metadata"}),"\n",(0,a.jsx)(t.li,{children:"Generate a unique identifier for the new job"}),"\n",(0,a.jsx)(t.li,{children:"Save the job using the generated id as filename"}),"\n"]}),(0,a.jsxs)(t.p,{children:["At the end of the process it will return a ",(0,a.jsx)(t.em,{children:"LayoutDto"})," object, which contains the extracted metadata"]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",metastring:'title="Response Body"',children:'// LayoutDto\n{\n  "id": 0,\n  "name": "string",\n  "supportSide": "string",\n  "created": "2019-12-10T10:06:50.466318Z",\n  "updated": "2019-12-10T10:06:50.466318Z",\n  // ApplicationFileDto\n  "file": { \n    "filename": "string",\n    "originalFilename": "string",\n    "displayName": "string",\n    "size": 0,\n    "location": "string",\n    "checksum": "string",\n    "extension": "string",\n    "created": "2019-12-10T10:06:50.466318Z",\n    "updated": "2019-12-10T10:06:50.466318Z"\n  },\n  // EntityDto\n  "entities": [\n    {\n      "id": 0,\n      "penId": 0,\n      "markLoopCount": 0,\n      "name": "string",\n      "displayName": "string",\n      "prefix": "string",\n      "type": "Bitmap",\n      "userData": 0,\n      "layoutId": 0,\n      "layoutName": "string",\n      "rotationAngle": 0,\n      "expectedMarkDuration": "25:01:01.001",\n      // DRectangleDto\n      "outline": {\n        "x": 0,\n        "y": 0,\n        "width": 0,\n        "height": 0,\n        "dataType": "double"\n      }\n    }\n    ...\n  ],\n  ...\n}\n'})})]})]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h3,{id:"3-create-layouts",children:"3. Create Layouts"}),"\n",(0,a.jsxs)(t.p,{children:["Layouts are ",(0,a.jsx)(t.em,{children:"SJF Files"})," assigned to a ",(0,a.jsx)(t.em,{children:"Job Template"})," and a ",(0,a.jsx)(t.em,{children:"card side"}),". AIDA uses this information during issuance to correctly position the card before marking."]}),"\n",(0,a.jsxs)(F.A,{groupId:"switch",children:[(0,a.jsxs)(P.A,{value:"webapp",label:"Web App",children:[(0,a.jsx)("p",{className:"margin-top-2",children:(0,a.jsxs)(t.p,{children:["The GUI shows a list of previously imported ",(0,a.jsx)(t.em,{children:"SJF Files"}),". Select files that you want to print on the front side of the card and click ",(0,a.jsx)("span",{className:"btn",children:"NEXT"})]})}),(0,a.jsx)("img",{className:"wizard-step",src:p}),(0,a.jsx)("p",{className:"margin-top-2",children:(0,a.jsx)(t.p,{children:"Do the same for the rear side."})}),(0,a.jsx)("img",{className:"wizard-step",src:c})]}),(0,a.jsxs)(P.A,{value:"api",label:"API",children:[(0,a.jsxs)(t.p,{children:["In terms of API calls, ",(0,a.jsx)(t.em,{children:"Creating a Layout"})," means:"]}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Loading a Job Template"}),"\n",(0,a.jsx)(t.li,{children:"Importing entities from another SJF file, specifying where those entities should be printed (front, rear)"}),"\n",(0,a.jsx)(t.li,{children:"Saving the Job file"}),"\n"]}),(0,a.jsx)(t.p,{children:"An example of what the webapp does (in pseudo code) looks like this:"}),(0,a.jsxs)(F.A,{groupId:"code",children:[(0,a.jsx)(P.A,{value:"ts",label:"Angular",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"\n  // load the job template in SCAPS SAMLight\n  await this.scannerApi.loadJobTemplate({\n    id: jobTemplateId, // jobTemplateId saved previously when we created the job template\n    force:true\n  }).toPromise();\n\n  // selectedLayouts is the list of selected elements by the user in the UI \n  // it is a collection of { layoutId: number, cardSide: string } objects\n  for(const selection of selectedLayouts) {\n    // loadLayout will import the entities from the layout's SJF file\n    // into the currently loaded job template and assigne the specified card side.\n    await this.scannerApi.loadLayout({\n      id: selection.layoutId,\n      cardSide: selection.cardSide \n    }).toPromise();  \n  }\n\n  // saveJobTemplate saves the template's SJF file, and updates the database\n  await this.scannerApi.saveJobTemplate({}).toPromise();\n\n"})})}),(0,a.jsx)(P.A,{value:"csharp",label:"C#",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:"// data type used to represent SJF files assigned to a card side\npublic record LayoutSelection(int LayoutId, string CardSide);\n\npublic async Task AssignLayouts(int jobTemplateId, IEnumerable<LayoutSelection> selectedLayouts) \n{\n   await _scannerApi.LoadJobTemplate(jobTemplateId);\n\n   foreach(var selection in selectedLayouts) \n      await _scannerApi.LoadLayout(selection.LayoutId, selectedLayouts.cardSide);\n\n   await _scannerApi.SaveJobTemplate();\n}\n"})})}),(0,a.jsxs)(P.A,{value:"http",label:"HTTP",children:[(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-http",metastring:'title="Load Job Template"',children:"POST /AIDA/v1/scanner/load-job-template?id=1\nHost: $BOX_IP_ADDRESS:5000\nAccept: application/json\n"})}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-http",metastring:'title="Load Layouts"',children:"POST /AIDA/v1/scanner/load-layout?layoutName=DemoBox_Front&supportSide=front\nHost: $BOX_IP_ADDRESS:5000\nAccept: application/json\n\n... \n\nPOST /AIDA/v1/scanner/load-layout?layoutName=DemoBox_Rear&supportSide=rear\nHost: $BOX_IP_ADDRESS:5000\nAccept: application/json\n\n"})}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-http",metastring:'title="Save the job template"',children:"POST /AIDA/v1/scanner/save\nHost: $BOX_IP_ADDRESS:5000\nAccept: application/json\n\n"})})]})]})]})]}),"\n",(0,a.jsx)(t.h3,{id:"4-attach-a-data-source",children:"4. Attach a Data Source"}),"\n",(0,a.jsx)(t.p,{children:"The last thing to do is to generate the database tables that we will use to provide personalization data and schedule jobs."}),"\n",(0,a.jsxs)(F.A,{groupId:"switch",children:[(0,a.jsxs)(P.A,{value:"webapp",label:"Web App",children:[(0,a.jsxs)(t.p,{children:["Go ahead and click ",(0,a.jsx)("span",{className:"btn",children:"CREATE DATASOURCE"})," to complete the configuration. Flagging the ",(0,a.jsx)(t.em,{children:"Generate mock dataset"})," checkbox will populate\nthe generated tables with mock data. This might be useful for testing purposes."]}),(0,a.jsx)("img",{className:"wizard-step",src:h})]}),(0,a.jsxs)(P.A,{value:"api",label:"API",children:[(0,a.jsxs)(t.p,{children:["We can generate ",(0,a.jsx)(t.em,{children:"Data Exchange Tables"})," using the ",(0,a.jsx)(t.em,{children:"ETL Service API"}),"."]}),(0,a.jsxs)(t.p,{children:["The the ",(0,a.jsx)(t.em,{children:"GenerateDataSource"})," will generate a ",(0,a.jsx)(t.em,{children:"Data Exchange Table"})," and configure a ",(0,a.jsx)(t.em,{children:"Data Source"})," object for the specified job template.\n",(0,a.jsx)(t.em,{children:"Data Source"})," objects are used during issuance to retrive information such as:"]}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.strong,{children:"Connection string"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.strong,{children:"Table Name"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.strong,{children:"Query Template"})}),"\n"]}),(0,a.jsx)(t.p,{children:"The generated data source will look like this:"}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Table Name: The name of the ",(0,a.jsx)(t.em,{children:"Data Exchange Table"})," generated by the system"]}),"\n",(0,a.jsx)(t.li,{children:"Connection String: Connection string for connecting to AIDA's RDBMS"}),"\n",(0,a.jsx)(t.li,{children:"Query Template: SQL that selects all non blob fields (images are fetched as needed during issuance)"}),"\n"]}),(0,a.jsxs)(F.A,{groupId:"code",children:[(0,a.jsx)(P.A,{value:"ts",label:"Angular",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"import {EtlService} from '@ixla/aida-sdk-angular'\n...\n// EtlService injected from DI\nconstructor(private readonly etlService: EtlService) {\n}\n...\nawait this.etlService.generateDataSource({\n  // job templateId previously stored or retrieved from APIs\n  jobTemplateId: jobTemplateId\n}).toPromise()\n...\n"})})}),(0,a.jsx)(P.A,{value:"csharp",label:"C#",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:"  using IXLA.AIDA.Sdk;\n  ...\n  private readonly EtlService _etl;\n  ...\n  await _etl.GenerateDataSource(jobTemplateId);\n"})})}),(0,a.jsx)(P.A,{value:"http",label:"HTTP",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-http",children:"POST /AIDA/v1/etl/JOB_TEMPLATE_ID/generate-datasource\nHost: $BOX_IP_ADDRESS:5000\nAccept: application/json\n"})})})]})]})]}),"\n",(0,a.jsx)(t.h3,{id:"were-done",children:"We're done!"}),"\n",(0,a.jsxs)(t.p,{children:["We have created and configured our first job template.\nKeep reading to see how we can populate ",(0,a.jsx)(t.em,{children:"Data Exchange Tables"})," with personalization data and finally start issuing cards."]})]})}function W(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(R,{...e})}):R(e)}},9365:(e,t,n)=>{n.d(t,{A:()=>s});n(6540);var a=n(8215);const i={tabItem:"tabItem_Ymn6"};var r=n(4848);function s(e){let{children:t,hidden:n,className:s}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.A)(i.tabItem,s),hidden:n,children:t})}},1470:(e,t,n)=>{n.d(t,{A:()=>v});var a=n(6540),i=n(8215),r=n(3104),s=n(6347),l=n(205),o=n(7485),c=n(1682),d=n(9466);function p(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??function(e){return p(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:i}}=e;return{value:t,label:n,attributes:a,default:i}}))}(n);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function u(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const i=(0,s.W6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,o.aZ)(r),(0,a.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(i.location.search);t.set(r,e),i.replace({...i.location,search:t.toString()})}),[r,i])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:i}=e,r=h(e),[s,o]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!u({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[c,p]=m({queryString:n,groupId:i}),[f,g]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[i,r]=(0,d.Dv)(n);return[i,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:i}),x=(()=>{const e=c??f;return u({value:e,tabValues:r})?e:null})();(0,l.A)((()=>{x&&o(x)}),[x]);return{selectedValue:s,selectValue:(0,a.useCallback)((e=>{if(!u({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),p(e),g(e)}),[p,g,r]),tabValues:r}}var g=n(2303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=n(4848);function j(e){let{className:t,block:n,selectedValue:a,selectValue:s,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),d=e=>{const t=e.currentTarget,n=o.indexOf(t),i=l[n].value;i!==a&&(c(t),s(i))},p=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=o.indexOf(e.currentTarget)+1;t=o[n]??o[0];break}case"ArrowLeft":{const n=o.indexOf(e.currentTarget)-1;t=o[n]??o[o.length-1];break}}t?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},t),children:l.map((e=>{let{value:t,label:n,attributes:r}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>o.push(e),onKeyDown:p,onClick:d,...r,className:(0,i.A)("tabs__item",x.tabItem,r?.className,{"tabs__item--active":a===t}),children:n??t},t)}))})}function y(e){let{lazy:t,children:n,selectedValue:i}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===i));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==i})))})}function w(e){const t=f(e);return(0,b.jsxs)("div",{className:(0,i.A)("tabs-container",x.tabList),children:[(0,b.jsx)(j,{...e,...t}),(0,b.jsx)(y,{...e,...t})]})}function v(e){const t=(0,g.A)();return(0,b.jsx)(w,{...e,children:p(e.children)},String(t))}}}]);